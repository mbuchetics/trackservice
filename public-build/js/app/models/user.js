define(["order!libs.jquery","order!libs.underscore","order!libs.backbone","utils"],function(a,b,c,d){var e=c.Model.extend({setUserData:function(){var b=this;FB.api("/me",function(c){d.log("user logged in"),d.log(c),b.set({username:c.name,id:c.id,isLoggedIn:!0}),UserLikes.fetchLikedFromServer(c.id,15),a("#login").hide(),a("#logout").show(),a("#username").text("Hallo, "+c.first_name+"!")})},check:function(){var b=this;FB.getLoginStatus(function(c){c.authResponse?b.setUserData():(d.log("unknown user"),b.set({username:null,id:null,isLoggedIn:!1}),a("#login").show(),a("#logout").hide())})},login:function(){var a=this;FB.login(function(b){b.authResponse?a.setUserData():d.log("user cancelled login")})},logout:function(){var b=this;FB.logout(function(c){b.set({username:null,id:null,isLoggedIn:!1}),a("#login").show(),a("#logout").hide()})}});return e})